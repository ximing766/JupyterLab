# 战争策略游戏

一个基于pygame开发的回合制战争策略游戏，玩家可以在地图上控制区域并进行战略攻击。

## 游戏特性

### 地图系统
- **真实地图支持**：可以加载预定义的真实地图文件
- **自动地图生成**：如果没有地图文件，会自动创建示例地图
- **地形类型**：平原(P)、森林(F)、山地(M)、水域(W)、城市(C)
- **地形效果**：不同地形提供不同的防御加成
- **区域划分**：地图分为小块区域，每个区域可以被占领
- **地图编辑**：可以通过修改 `real_map.txt` 文件自定义地图

### 战争策略
- 回合制游戏机制
- 玩家可以选择自己的区域进行攻击
- 只能攻击相邻的敌方区域
- 战斗结果基于兵力数量和地形防御加成
- 简单的资源系统：每回合根据控制区域数量获得增援

### 地形防御加成
- 平原：1.0倍（无加成）
- 森林：1.2倍防御加成
- 山地：1.5倍防御加成
- 水域：0.8倍防御加成
- 城市：1.3倍防御加成

## 游戏操作

### 基本控制
- **左键点击**：选择自己的区域或攻击敌方区域
- **空格键**：结束当前回合
- **ESC键**：取消当前选择

### 游戏流程
1. 选择阶段：点击自己控制的区域
2. 攻击阶段：点击相邻的敌方区域进行攻击
3. 结束回合：按空格键结束回合，切换到对方玩家

### 视觉提示
- **蓝色区域**：玩家1控制的区域
- **红色区域**：玩家2控制的区域
- **黄色边框**：当前选中的区域
- **橙色边框**：可以攻击的目标区域
- **数字**：显示该区域的兵力数量

## 运行游戏

### 环境要求
- Python 3.11+
- pygame 2.6.1+

### 安装依赖
```bash
uv sync
```

### 启动游戏
```bash
uv run python main.py
```

## 游戏规则

1. **初始设置**：游戏开始时，玩家1控制左上角区域，玩家2控制右下角区域
2. **攻击规则**：
   - 只能从自己控制的区域攻击相邻的敌方区域
   - 攻击时必须至少保留1个兵力在原区域
   - 战斗结果基于攻击力vs防御力的随机计算
3. **占领规则**：攻击成功后，目标区域归攻击方所有
4. **增援规则**：每回合结束时，根据控制区域数量获得增援（每3个区域获得1个增援）

## 地图自定义

### 地图文件格式
游戏会自动查找 `real_map.txt` 文件来加载真实地图。地图文件使用字符表示不同地形：

- **W** - 水域 (Water)
- **M** - 山地 (Mountain) 
- **F** - 森林 (Forest)
- **P** - 平原 (Plains)
- **C** - 城市 (City)

### 示例地图
```
WWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
WMMMMMMMMMMMMMMMMMMMMMMMMMMMFW
WMMFFFFFFFFFFFFFFFFFFFFFFFFW
WMMFFFFFPPPPPPPPPPPPPPPFFFW
WMMFFFFFPPPPCCPPPPPPPPPFFFW
```

### 创建自定义地图
1. 在游戏目录下创建或编辑 `real_map.txt` 文件
2. 使用上述字符绘制你的地图
3. 每行代表地图的一行，每个字符代表一个区域
4. 建议地图大小为 30x20 (宽x高)
5. 重新启动游戏即可加载新地图

## 技术实现

- 使用pygame进行图形渲染和事件处理
- 面向对象设计，包含Territory、GameMap、Game等核心类
- 模块化的游戏逻辑，易于扩展和维护
- 支持多种地形类型和战斗机制
- 真实地图加载系统，支持自定义地图文件

## 未来扩展

- 添加更多玩家支持
- 实现AI对手
- 添加更复杂的资源系统
- 增加单位类型和特殊能力
- 添加音效和更丰富的视觉效果